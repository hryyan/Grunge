# -*- coding: utf-8 -*-from PyQt4.QtCore import *from PyQt4.QtGui import *from urllib import FancyURLopenerimport re, sysQTextCodec.setCodecForTr(QTextCodec.codecForName("utf8"))class MyTableView(QTableWidget):    def __init__(self, parent = None):        super(MyTableView, self).__init__(parent)                self.setWindowTitle("Youku Assist")        self.resize(740, 640)        self.setRowCount(30)        self.setColumnCount(2)        self.setHorizontalHeaderItem(0, QTableWidgetItem(self.tr("标题")))        self.setHorizontalHeaderItem(1, QTableWidgetItem(self.tr("链接")))                title, url = getInfo()        for x in range(len(title)):            self.setItem(x, 0, QTableWidgetItem(title[x]))            #self.textEdit = QLabel(url[x])            #self.textEdit.setOpenExternalLinks(True)            self.setItem(x, 1, QTableWidgetItem(url[x]))            #self.setCellWidget(x, 1, self.textEdit)        self.resizeColumnsToContents()        self.connect(self, SIGNAL("cellDoubleClicked(int, int)"), self.OpenUrl)            def OpenUrl(self, row, col):        if col == 1:            QDesktopServices.openUrl(QUrl(self.item(row, col).text()))            print self.item(row, col).text()def getInfo():    opener = FancyURLopener()    urlstr = 'http://i.youku.com/u/UMjc1MjAyMTM2/videos/order_1_view_1_page_1'        html_data = str(opener.open(urlstr).read())    #print file;    re_1 = re.compile(r'"SPL.+?".+?href=".+?"')    data = re_1.findall(html_data)    re_2 = re.compile(r'"SPL.+?"')    re_3 = re.compile(r'"http.+?"')        title = []    url = []    for x in data:        t = re_2.findall(str(x))[0].strip('''"''')        if t not in title:            title.append(t)        u = re_3.findall(str(x))[0].strip('''"''')        if u not in url:            url.append(u)    return (title, url)    if __name__ == '__main__':    app = QApplication(sys.argv)    window = MyTableView()    window.show()    app.exec_()